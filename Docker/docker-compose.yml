version: "3"

services: 
    project:
        container_name: playlab-${COURSE}
        build: .
        stdin_open: true 
        tty: true
        privileged: true
        env_file: 
            - ./.env
        volumes: 
            - ../projects:/workspace/projects
            - ../www/${CURRENT_FLASK_FOLDER}:/workspace/www
        expose:
            - 8080
        ports: 
            - ${PORT_MAPPING}

    webserver:
        container_name: playlab-nginx-${COURSE}
        image: nginx:1.21.0
        restart: always
        volumes: 
            - ./nginx.conf:/etc/nginx/conf.d/default.conf
        ports: 
            - ${NGINX_PORT}:80
